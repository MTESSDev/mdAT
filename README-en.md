![Code Coverage](https://img.shields.io/badge/Code%20Coverage-92%25-success?style=flat)

# mdAT - Markdown Auto-Tests

[![fr](https://img.shields.io/badge/lang-fr-blue.svg)](https://github.com/MTESSDev/mdAT/blob/main/README.md)

## Description

`mdAT` is a simple library that replaces unit and integration tests. With `mdAT`, developers can write unit tests in the traditional way, but without the need to add many test data from JSON, XML, YAML files, or use manual `[InlideData]` with escaped JSON object.

To use `mdAT`, follow these steps:

1. Create a normal MSTestV2 with `[TestClass]`, `[TestMethod]`.
1. Code your unit test in the traditional way using `Moq`, if needed, then call your method you want to test.
1. Add all your desired parameters to your test method, theses will be exposed to be replaced by ``mdAT`` markdown test file.
1. Add `[MarkdownTest("~/Tests/{method}.md")]` with your `Tests` folder as cases repository (let it being empty in first place).
1. Ensure to surround your tested method with `Verify.Assert()`, it will automatically validate the JSON expected result, even if it is an exception.
1. Your `.md` test file will be autogenerated during the first run.
1. Edit your `.md` file as you wish.
1. Enjoy!

````csharp
[TestClass]
public class Calc
{
    [TestMethod]
    [MarkdownTest("~/Tests/{method}.md")]
    public async Task Add(int val1, int val2, Expected expected)
    {
        _ = await Verify.Assert(() => Task.FromResult(Add(val1, val2)), expected);
    }

    // Fake usecase
    public static int Add(int val1, int val2)
    {
        return val1 + val2;
    }
}
````

All test cases can be stored in a single markdown file:

```````md
# Test Add method

Simple test case for addition tests.

## Case 1

Let's try simple `1 + 1` expected to return `2`

``````yaml
val1: 1
val2: 1
expected: 
  verify:
   - type: match
     data: 2
``````

## Case 2
``````yaml
val1: 212
val2: 2444
expected: 
  verify:
   - type: match
     data: 2656
``````
```````

Using `mdAT`, analysts and developers can work together with a unique source of tests, and maintainers can edit and validate all tests locally or on a build server.